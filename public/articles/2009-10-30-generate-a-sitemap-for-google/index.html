<!DOCTYPE html>
<html lang="en-US">
  <head>
      <meta charset="utf-8">
      <title>Generate a sitemap for Google - blindgaenger</title>
      
      <link rel="stylesheet" href="/stylesheets/reset.css">
      <link rel="stylesheet" href="/stylesheets/app.css">
      <link rel="stylesheet" href="/stylesheets/debug.css">
      <link rel="canonical" href="http://blindgaenger.net/articles/2009-10-30-generate-a-sitemap-for-google/">
      <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
      <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  </head>
  <body lang="en" class="page">
    <header class="page__header">
      <h1>blindgaenger</h1>
    </header>
    <nav class="page__nav">
      <ul>
        <li><a href="http://blindgaenger.net/">Home</a></li>
        <li><a href="/articles/">Articles</a></li>
        <li><a href="/tags/">Tags</a></li>
      </ul>
    </nav>
    <main role="main" class="page__content">


<article class="article article--full">
  <header class="article__header">
    <h1>Generate a sitemap for Google</h1>
  </header>
  <div class="article__content">
    

<p>Alright, I thought it would be a good idea to add a sitemap to this blog. Actually
I don&rsquo;t know if this makes any difference for such a small site. But it won&rsquo;t hurt!</p>

<h1 id="generate-a-sitemap:0e27169ed7fda3b0dbf151e9041e183e">Generate a sitemap</h1>

<p>My first attempt to generate a sitemap was to google for <a href="http://www.google.com/search?hl=en&amp;ie=UTF-8&amp;oe=UTF-8&amp;q=%22generate+sitemap%22">&ldquo;generate sitemap&rdquo;</a>. And guess what, the first
search result is a <a href="http://www.xml-sitemaps.com/">XML Sitemaps Generator</a>. No
registration, a prompting input field for the URL, nothing to lose … So let&rsquo;s try it!</p>

<p>Of course, the free service is limited, but it is enough to get a first
impression about what sitemaps are all about.</p>

<p>Enter the URL of your blog, defaults for <em>change frequency</em> and <em>modification date</em>
are fine. A little interesting is the <em>automatic priority calculation</em>, so switch
it on and press start. After a while the results are downloadable in various
formats. But you can ignore all except the <code>sitemap.xml</code> file.</p>

<h1 id="ror-is-not-ror:0e27169ed7fda3b0dbf151e9041e183e">ROR is not RoR</h1>

<p>Before we examine the <code>sitemap.xml</code>, there is another file called <code>ror.xml</code>.
Obviously it has nothing to do with Ruby on Rails. Anyway I&rsquo;ve never heard about
this format before, but it looked like this:</p>

<p>{{
&lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;UTF-8&rdquo;?&gt;
<rss version="2.0" xmlns:ror="http://rorweb.com/0.1/" >
<channel>
  <title>ROR Sitemap for <a href="http://blog.blindgaenger.net/">http://blog.blindgaenger.net/</a></title>
  <link><a href="http://blog.blindgaenger.net/">http://blog.blindgaenger.net/</a></link>
  <item>
       <link><a href="http://blog.blindgaenger.net/">http://blog.blindgaenger.net/</a></link>
       <title>when you don&rsquo;t know where you @ &mdash; blindgaenger</title>
       <a href="ror:updatePeriod">ror:updatePeriod</a><a href="/ror:updatePeriod">/ror:updatePeriod</a>
       <a href="ror:sortOrder">ror:sortOrder</a>0<a href="/ror:sortOrder">/ror:sortOrder</a>
       <a href="ror:resourceOf">ror:resourceOf</a>sitemap<a href="/ror:resourceOf">/ror:resourceOf</a>
  </item>
…
}}</p>

<p>Alright, it&rsquo;s an application of RSS feeds. Note the <code>ror</code> namespace extension
for <a href="http://rorweb.com">http://rorweb.com</a> and the prefixed elements below. Unfortunately rorweb.com
seems to have some problems and couldn&rsquo;t be resolved. But it turns out ROR stands
for <em>Resources Of a Resource</em> and basically provides the same functionality as
we&rsquo;ll find in &lsquo;sitemap.xml`.</p>

<p>Don&rsquo;t know if it is mature enough. Let&rsquo;s see if they fix the homepage and ROR
makes it to version <code>0.2</code>. :)</p>

<h1 id="examine-the-sitemap-xml:0e27169ed7fda3b0dbf151e9041e183e">Examine the sitemap XML</h1>

<p>My generated sitemap looked something like this:</p>

<p>{{
&lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;UTF-8&rdquo;?&gt;
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc><a href="http://blog.blindgaenger.net/">http://blog.blindgaenger.net/</a></loc>
    <lastmod>2009-10-19T17:30:55+00:00</lastmod>
    <changefreq>weekly</changefreq>
    <priority>1.00</priority>
  </url>
  <url>
    <loc><a href="http://blog.blindgaenger.net/archives/">http://blog.blindgaenger.net/archives/</a></loc>
    <lastmod>2009-10-19T17:30:55+00:00</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.80</priority>
  </url>
  <url>
    <loc><a href="http://blog.blindgaenger.net/tags/">http://blog.blindgaenger.net/tags/</a></loc>
    <lastmod>2009-10-19T17:30:55+00:00</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.80</priority>
  </url>
  <url>
    <loc><a href="http://blog.blindgaenger.net/emacs_stuff.html">http://blog.blindgaenger.net/emacs_stuff.html</a></loc>
    <lastmod>2009-10-19T17:30:55+00:00</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.80</priority>
  </url>
  …
}}</p>

<p>Straight forward! A list of all pages and subpages on my blog&rsquo;s website. Note,
there is a pretty good explanation of all XML elements and more details
(like validation) at <a href="http://www.sitemaps.org/protocol.php">http://www.sitemaps.org/protocol.php</a>. Don&rsquo;t miss it!</p>

<p><code>loc</code> contains the url and is the only required element. You should specify full
not relative URLs.</p>

<p><code>lastmod</code> is optional, but recommended. For blog posts the date should reflect
when they were edited.</p>

<p>Now to the more interesting elements <code>changefreq</code> and <code>priority</code>. It is said,
that these values have nothing to do with your Google&rsquo;s page ranks or crawling.
But obiously there is no <em>clear/true/hard/unambiguous</em> value you can set. So
there is some room for magic and speculations.</p>

<p><code>changefreq</code> how often the page is subject to change (<code>always</code>, <code>hourly</code>,
<code>daily</code>, <code>weekly</code>, <code>monthly</code>, <code>yearly</code>, and <code>never</code>). I don&rsquo;t write very often,
so I was honest and set <code>changefreq</code> to <code>weekly</code>. Archived posts will be set to
<code>monthly</code> as I update old posts quite constantly.</p>

<p><code>priority</code> is a value from 0 to 1.0 (default is 0.5). But who wants to depreciate
his own pages without a reason. Therefore I chose priorities beteen 0.5 and 1.0.
Not very reasonable, I know!</p>

<h1 id="build-the-haml-template:0e27169ed7fda3b0dbf151e9041e183e">Build the HAML template</h1>

<p>Let&rsquo;s put it together. If you already know HAML this is the easiest part.
Otherwise take some minutes to check out the introduction on the
<a href="http://haml-lang.com/">HAML homepage</a>.</p>

<p>{{
!!! XML
%urlset{ :xmlns =&gt; &ldquo;<a href="http://www.sitemaps.org/schemas/sitemap/0.9&quot;">http://www.sitemaps.org/schemas/sitemap/0.9&quot;</a> }</p>

<ul>
<li><p>[&ldquo;&rdquo;, &ldquo;archives/&rdquo;, &ldquo;tags/&rdquo;].each_with_index do |url, index|
%url
  %loc= &ldquo;<a href="http://blog.blindgaenger.net/#{url}&quot;">http://blog.blindgaenger.net/#{url}&quot;</a>
  %lastmod= Time.now.xmlschema
  %changefreq weekly
  %priority= (index == 0) ? &ldquo;1.0&rdquo; : &ldquo;0.5&rdquo;</p></li>

<li><p>posts.each_with_index do |post, index|
%url
  %loc= post.url
  %lastmod= post.date.xmlschema
  %changefreq monthly
  %priority= post.priority || (index &lt; 5 ? &ldquo;0.8&rdquo; : &ldquo;0.6&rdquo;)
}}</p></li>
</ul>

<p>I&rsquo;ve added two loops, one for pages and one for posts. The pages don&rsquo;t have an
own timestamp, so the <code>lastmod</code> is when they are generated (resp. now).</p>

<p>Of course, the homepage&rsquo;s priority it <code>1.0</code> as it&rsquo;s the entry point of the blog.
All other static pages get the default of <code>0.5</code>, because they don&rsquo;t have real
content. They are just containers for links, not the results Google likes.</p>

<p>Next, the first 5 posts get a bonus priority of <code>0.8</code>. The summary of these pages
are featured on the homepage, so they are important in a kind of way. All other
posts get a <code>0.60</code> to distinguish them from archives and tags.</p>

<p>I don&rsquo;t know anything about your setup, but in the end (and with some custom
scripts) my sitemap gets generated at <a href="http://blog.blindgaenger.net/sitemap.xml">http://blog.blindgaenger.net/sitemap.xml</a>.
For Rails or Sinatra this should not be so complicated as I did it.</p>

<h1 id="submit-your-sitemap-to-google:0e27169ed7fda3b0dbf151e9041e183e">Submit your sitemap to Google</h1>

<p>Alright, now you have a <code>sitemap.xml</code> online, but Google doesn&rsquo;t know about it.
Let&rsquo;s tell &lsquo;em!</p>

<p>The first step is to register for <a href="http://www.google.com/webmasters/tools">Google Webmaster Tools</a>
and login. Now <code>Add a site</code>, which is <a href="http://blog.blindgaenger.net/">http://blog.blindgaenger.net/</a> in my case.
But now Google wants us to verify me as the owner of the site. Security is important,
so let&rsquo;s do this.</p>

<p>You can verify via a META tag or a file upload (BTW: same for Yahoo). I took the
file upload, because it&rsquo;s easier to setup and I don&rsquo;t have to redeploy the
application when I want to delete it again. All you have to do is to copy the
<code>googlexxxxxxxxxxxxx.html</code> file to your server, press the Verify button and you&rsquo;re
done.</p>

<p>Ok, finally about our sitemap! Now Google knows who you are and you can submit
your sitemap (resp. a link to it not the XML content). In the Webmaster Tools you&rsquo;ll
find the <code>Submit a Sitemap</code> button. Doing so will show you a <code>Pending download...</code>
in the status column. It’s merely a matter of time, when it gets downloaded and
parsed.</p>

<p>That&rsquo;s it, you&rsquo;re done. But keep in mind, only the <a href="http://en.wikipedia.org/wiki/Search_engine_optimization">SEO</a> gods can tell you if a sitemap makes any difference! :)</p>

  </div>
  <footer class="article__footer">
    <div>Words: 949</div>
    <div>Published: 0001-01-01</div>
    <div>ReadingTime: 5 min</div>
    <div>URL: http://blindgaenger.net/articles/2009-10-30-generate-a-sitemap-for-google/</div>
  </footer>
</article>

    </main>
    <footer class="page__footer">
      <div>FOOTER</div>
    </footer>
  </body>
</html>

